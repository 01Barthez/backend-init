# Items API

# Définitions des méthodes HTTP
get_items: &get_items
  tags:
    - Items
  summary: Récupère une liste paginée d'items
  description: Retourne une liste paginée d'items avec possibilité de filtrage
  parameters:
    - $ref: '../../components/parameters.yaml#/page'
    - $ref: '../../components/parameters.yaml#/limit'
    - $ref: '../../components/parameters.yaml#/itemName'
    - $ref: '../../components/parameters.yaml#/itemValue'
  responses:
    '200':
      description: Liste des items récupérée avec succès
      content:
        application/json:
          schema:
            type: object
            properties:
              items:
                type: array
                items:
                  $ref: '../../schemas/item.yaml'
              totalItems:
                type: integer
                example: 42
              totalPages:
                type: integer
                example: 5
              currentPage:
                type: integer
                example: 1
    '400':
      $ref: '../../components/responses.yaml#/BadRequest'
    '500':
      $ref: '../../components/responses.yaml#/ServerError'

create_item: &create_item
  tags:
    - Items
  summary: Crée un nouvel item
  description: Crée un nouvel item avec les données fournies
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../../schemas/item.yaml'
  responses:
    '201':
      description: Item créé avec succès
      content:
        application/json:
          schema:
            $ref: '../../schemas/item.yaml'
    '400':
      $ref: '../../components/responses.yaml#/BadRequest'
    '401':
      $ref: '../../components/responses.yaml#/Unauthorized'
    '500':
      $ref: '../../components/responses.yaml#/ServerError'

get_item: &get_item
  tags:
    - Items
  summary: Récupère un item par son ID
  description: Retourne un item spécifique en fonction de son identifiant
  parameters:
    - $ref: '../../components/parameters.yaml#/itemId'
  responses:
    '200':
      description: Item récupéré avec succès
      content:
        application/json:
          schema:
            $ref: '../../schemas/item.yaml'
    '404':
      $ref: '../../components/responses.yaml#/NotFound'
    '500':
      $ref: '../../components/responses.yaml#/ServerError'

update_item: &update_item
  tags:
    - Items
  summary: Met à jour un item existant
  description: Met à jour les informations d'un item existant
  parameters:
    - $ref: '../../components/parameters.yaml#/itemId'
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../../schemas/item.yaml'
  responses:
    '200':
      description: Item mis à jour avec succès
      content:
        application/json:
          schema:
            $ref: '../../schemas/item.yaml'
    '400':
      $ref: '../../components/responses.yaml#/BadRequest'
    '401':
      $ref: '../../components/responses.yaml#/Unauthorized'
    '404':
      $ref: '../../components/responses.yaml#/NotFound'
    '500':
      $ref: '../../components/responses.yaml#/ServerError'

delete_item: &delete_item
  tags:
    - Items
  summary: Supprime un item
  description: Supprime un item spécifique
  parameters:
    - $ref: '../../components/parameters.yaml#/itemId'
  responses:
    '204':
      description: Item supprimé avec succès
    '401':
      $ref: '../../components/responses.yaml#/Unauthorized'
    '404':
      $ref: '../../components/responses.yaml#/NotFound'
    '500':
      $ref: '../../components/responses.yaml#/ServerError'

# Récupérer tous les items
/items:
  get:
    <<: *get_items
  post:
    <<: *create_item
  delete:
    tags:
      - Items
    summary: Supprime tous les items
    description: Supprime tous les items de la base de données
    responses:
      '200':
        $ref: '../../components/responses.yaml#/SuccessResponse'
      '500':
        $ref: '../../components/responses.yaml#/ServerError'

# Opérations sur un item spécifique
/items/{id}:
  parameters:
    - $ref: '../../components/parameters.yaml#/id'

  get:
    <<: *get_item
  put:
    <<: *update_item
  delete:
    <<: *delete_item
