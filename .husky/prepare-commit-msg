#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# This hook helps with conventional commits
COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

# Only add emoji for new commits, not for amends
if [ -z "$COMMIT_SOURCE" ] || [ "$COMMIT_SOURCE" = "message" ]; then
  # Add emoji based on commit type
  sed -i.bak -E '1s/^(feat)/âœ¨ &/; 1s/^(fix)/ğŸ› &/; 1s/^(docs)/ğŸ“ &/; 1s/^(style)/ğŸ’„ &/; 1s/^(refactor)/â™»ï¸ &/; 1s/^(perf)/âš¡ &/; 1s/^(test)/âœ… &/; 1s/^(build)/ğŸ‘· &/; 1s/^(ci)/ğŸ”§ &/; 1s/^(chore)/ğŸ”¨ &/; 1s/^(revert)/âª &/' "$COMMIT_MSG_FILE"
  rm -f "${COMMIT_MSG_FILE}.bak"
fi