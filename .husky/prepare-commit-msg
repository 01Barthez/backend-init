#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# This hook helps with conventional commits
COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

# Only add emoji for new commits, not for amends
if [ -z "$COMMIT_SOURCE" ] || [ "$COMMIT_SOURCE" = "message" ]; then
  # Add emoji based on commit type
  sed -i.bak -E '1s/^(feat)/✨ &/; 1s/^(fix)/🐛 &/; 1s/^(docs)/📝 &/; 1s/^(style)/💄 &/; 1s/^(refactor)/♻️ &/; 1s/^(perf)/⚡ &/; 1s/^(test)/✅ &/; 1s/^(build)/👷 &/; 1s/^(ci)/🔧 &/; 1s/^(chore)/🔨 &/; 1s/^(revert)/⏪ &/' "$COMMIT_MSG_FILE"
  rm -f "${COMMIT_MSG_FILE}.bak"
fi